<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTFâ€‘8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Daftar Belanja | Dom JSg</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  
  <div class="shopping-container">
    <h1>Daftar Belanja</h1>
    <div class="input-area">
      <input type="text" class="shopping-input" id="teks" placeholder="Tambah barang...">
      <button class="add-btn" id="tombol">Tambah</button>
    </div>
    <ul class="shopping-list" id="daftar" >

    </ul>
  </div>

<script>
  const teks = document.getElementById('teks');
  const tombol = document.getElementById('tombol');
  const daftar = document.getElementById('daftar');

  let editMode = false;
  let itemEdit = null;

  tombol.addEventListener('click', function() {
    const value = teks.value.trim();
    if (value !== '') {
      if (editMode && itemEdit) {
        // Update mode
        itemEdit.querySelector('.item-text').textContent = value;
        tombol.textContent = 'Tambah';
        editMode = false;
        itemEdit = null;
        teks.value = '';
      } else {
        // Tambah mode
        const li = document.createElement('li');
        const itemContent = document.createElement('div');
        itemContent.className = 'item-content';

        const spanText = document.createElement('span');
        spanText.className = 'item-text';
        spanText.textContent = value;

        const btnEdit = document.createElement('button');
        btnEdit.textContent = 'Edit';
        btnEdit.className = 'btn-action btn-edit';

        const btnHapus = document.createElement('button');
        btnHapus.textContent = 'Hapus';
        btnHapus.className = 'btn-action btn-hapus';

        const btnGroup = document.createElement('div');
        btnGroup.style.display = 'flex';
        btnGroup.appendChild(btnEdit);
        btnGroup.appendChild(btnHapus);

        itemContent.appendChild(spanText);
        itemContent.appendChild(btnGroup);
        li.appendChild(itemContent);
        daftar.appendChild(li);

        btnHapus.addEventListener('click', function() {
          daftar.removeChild(li);
          // Jika sedang edit item yang dihapus, reset mode
          if (editMode && itemEdit === li) {
            tombol.textContent = 'Tambah';
            editMode = false;
            itemEdit = null;
            teks.value = '';
          }
        });

        btnEdit.addEventListener('click', function() {
          teks.value = spanText.textContent;
          tombol.textContent = 'Update';
          editMode = true;
          itemEdit = li;
          teks.focus();
        });

        teks.value = '';
      }
    } else {
      alert('Masukkan barang yang ingin ditambahkan! Tidak boleh kosong.');
    }
  });
</script>
</body>
</html>